<Window x:Class="MaskBrowser.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MaskBrowser.Desktop"
        mc:Ignorable="d"
        Title="MASK BROWSER" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#000000">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Navigation Bar -->
        <Grid Grid.Row="0" Background="#1a1a1a" Height="50">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,0,0,0">
                <Button Content="Профили" Click="ProfileButton_Click" Style="{StaticResource MenuButtonStyle}"/>
                <Button Content="Настройки" Click="SettingsButton_Click" Style="{StaticResource MenuButtonStyle}"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,10,0">
                <TextBlock Text="{Binding UserName}" VerticalAlignment="Center" Margin="0,0,15,0" Foreground="#a3a3ff"/>
                <Button Content="Выход" Click="LogoutButton_Click" Style="{StaticResource MenuButtonStyle}"/>
            </StackPanel>
        </Grid>

        <!-- Content Area -->
        <Grid Grid.Row="1">
            <!-- Login View -->
            <Grid x:Name="LoginView" Visibility="Visible">
                <Border Background="#0a0a0a" CornerRadius="10" Width="400" Height="500">
                    <StackPanel Margin="30">
                        <TextBlock Text="MASK BROWSER" FontSize="32" FontWeight="Bold" 
                                   Foreground="#6366f1" HorizontalAlignment="Center" Margin="0,0,0,30"/>
                        
                        <TextBlock Text="Email" Foreground="#ffffff" Margin="0,10,0,5"/>
                        <TextBox x:Name="EmailTextBox" Background="#1a1a1a" Foreground="#ffffff" 
                                 BorderBrush="#6366f1" Padding="10" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Пароль" Foreground="#ffffff" Margin="0,10,0,5"/>
                        <PasswordBox x:Name="PasswordBox" Background="#1a1a1a" Foreground="#ffffff" 
                                     BorderBrush="#6366f1" Padding="10" Margin="0,0,0,20"/>
                        
                        <Button Content="Войти" Click="LoginButton_Click" 
                                Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,0,10"/>
                        <Button Content="Регистрация" Click="RegisterButton_Click" 
                                Style="{StaticResource SecondaryButtonStyle}"/>
                        
                        <TextBlock x:Name="ErrorTextBlock" Foreground="#ff4444" 
                                   TextWrapping="Wrap" Margin="0,15,0,0" Visibility="Collapsed"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Profile Manager View -->
            <Grid x:Name="ProfileView" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Button Grid.Row="0" Content="+ Создать профиль" Click="CreateProfileButton_Click" 
                        HorizontalAlignment="Left" Margin="10" Style="{StaticResource PrimaryButtonStyle}"/>

                <ListBox x:Name="ProfileListBox" Grid.Row="1" Background="#0a0a0a" 
                         BorderThickness="0" Margin="10">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#1a1a1a" CornerRadius="5" Margin="5" Padding="15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="Bold" 
                                                   Foreground="#ffffff" Margin="0,0,0,5"/>
                                        <TextBlock Text="{Binding Status}" Foreground="#a3a3ff" Margin="0,0,0,5"/>
                                        <TextBlock Text="{Binding ServerNodeIp}" Foreground="#888888" FontSize="12"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Button Content="Запустить" Click="StartProfile_Click" 
                                                Tag="{Binding}" Style="{StaticResource ActionButtonStyle}" Margin="5,0"/>
                                        <Button Content="Остановить" Click="StopProfile_Click" 
                                                Tag="{Binding}" Style="{StaticResource ActionButtonStyle}" Margin="5,0"/>
                                        <Button Content="Удалить" Click="DeleteProfile_Click" 
                                                Tag="{Binding}" Style="{StaticResource DangerButtonStyle}" Margin="5,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>

            <!-- Browser View -->
            <local:CefBrowser x:Name="BrowserView" Grid.Row="1" Visibility="Collapsed"/>
        </Grid>
    </Grid>
</Window>

