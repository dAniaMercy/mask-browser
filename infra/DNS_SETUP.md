# DNS Configuration for maskbrowser.ru

## Your Server IP
```
109.172.101.73
```

## DNS Records to Configure

–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ (–≥–¥–µ –∫—É–ø–∏–ª–∏ maskbrowser.ru) –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ DNS –∑–∞–ø–∏—Å–∏:

### A Records (IPv4)

| –¢–∏–ø | –ò–º—è | –ó–Ω–∞—á–µ–Ω–∏–µ | TTL |
|-----|-----|----------|-----|
| A | @ | 109.172.101.73 | 3600 |
| A | www | 109.172.101.73 | 3600 |
| A | admin | 109.172.101.73 | 3600 |

### –û–ø–∏—Å–∞–Ω–∏–µ:

- **@** (–∏–ª–∏ –ø—É—Å—Ç–æ–µ) ‚Üí `maskbrowser.ru` ‚Üí Client Web
- **www** ‚Üí `www.maskbrowser.ru` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `maskbrowser.ru`
- **admin** ‚Üí `admin.maskbrowser.ru` ‚Üí Admin Panel

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

#### Reg.ru
1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
2. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–µ–Ω **maskbrowser.ru**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DNS"**
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"**
5. –î–æ–±–∞–≤—å—Ç–µ 3 A –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤—ã—à–µ

#### Nic.ru
1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
2. –î–æ–º–µ–Ω—ã ‚Üí **maskbrowser.ru** ‚Üí **DNS-—Å–µ—Ä–≤–µ—Ä—ã –∏ –∑–æ–Ω–∞**
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–æ–π**
4. –î–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å–∏

#### Cloudflare (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
1. –í–æ–π–¥–∏—Ç–µ –≤ Cloudflare
2. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–µ–Ω **maskbrowser.ru**
3. DNS ‚Üí **Add record**
4. –î–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å–∏
5. **–í–∞–∂–Ω–æ:** –û—Ç–∫–ª—é—á–∏—Ç–µ –æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞—á–∫–æ (proxy) –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL

#### GoDaddy
1. –í–æ–π–¥–∏—Ç–µ –≤ GoDaddy
2. My Products ‚Üí **Domains** ‚Üí **maskbrowser.ru**
3. **Manage DNS**
4. –î–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å–∏

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π, –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
nslookup maskbrowser.ru
nslookup www.maskbrowser.ru
nslookup admin.maskbrowser.ru

# –ò–ª–∏ —á–µ—Ä–µ–∑ dig
dig maskbrowser.ru +short
dig www.maskbrowser.ru +short
dig admin.maskbrowser.ru +short

# –ò–ª–∏ —á–µ—Ä–µ–∑ host
host maskbrowser.ru
host www.maskbrowser.ru
host admin.maskbrowser.ru
```

–í—Å–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å **109.172.101.73**

### 3. –û–Ω–ª–∞–π–Ω –ø—Ä–æ–≤–µ—Ä–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ DNS:
- https://www.whatsmydns.net/
- https://dnschecker.org/
- https://mxtoolbox.com/SuperTool.aspx

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –¥–æ–º–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### AAAA Records (IPv6)
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å IPv6 –∞–¥—Ä–µ—Å:

| –¢–∏–ø | –ò–º—è | –ó–Ω–∞—á–µ–Ω–∏–µ | TTL |
|-----|-----|----------|-----|
| AAAA | @ | –≤–∞—à:ipv6:–∞–¥—Ä–µ—Å | 3600 |
| AAAA | www | –≤–∞—à:ipv6:–∞–¥—Ä–µ—Å | 3600 |
| AAAA | admin | –≤–∞—à:ipv6:–∞–¥—Ä–µ—Å | 3600 |

### MX Records (–¥–ª—è email)
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å email –Ω–∞ @maskbrowser.ru:

| –¢–∏–ø | –ò–º—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | TTL |
|-----|-----|----------|-----------|-----|
| MX | @ | mail.maskbrowser.ru | 10 | 3600 |

### TXT Records (–¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### SPF (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
```
–¢–∏–ø: TXT
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: v=spf1 ip4:109.172.101.73 -all
```

#### DMARC
```
–¢–∏–ø: TXT
–ò–º—è: _dmarc
–ó–Ω–∞—á–µ–Ω–∏–µ: v=DMARC1; p=quarantine; rua=mailto:dmarc@maskbrowser.ru
```

## –í—Ä–µ–º—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

- **–ú–∏–Ω–∏–º—É–º**: 5-10 –º–∏–Ω—É—Ç
- **–û–±—ã—á–Ω–æ**: 1-2 —á–∞—Å–∞
- **–ú–∞–∫—Å–∏–º—É–º**: 24-48 —á–∞—Å–æ–≤ (—Ä–µ–¥–∫–æ)

**–ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ**, –µ—Å–ª–∏ DNS –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å —Å—Ä–∞–∑—É. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

## Troubleshooting

### DNS –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π DNS –∫–µ—à

# Linux
sudo systemd-resolve --flush-caches

# macOS
sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder

# Windows
ipconfig /flushdns
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
dig @8.8.8.8 maskbrowser.ru         # Google DNS
dig @1.1.1.1 maskbrowser.ru         # Cloudflare DNS
dig @208.67.222.222 maskbrowser.ru  # OpenDNS
```

### DNS —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Nginx –∑–∞–ø—É—â–µ–Ω
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã
sudo netstat -tlnp | grep -E ':80|:443'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
sudo ufw status
```

## –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

–ö–æ–≥–¥–∞ DNS –∑–∞–ø–∏—Å–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª–∏—Å—å –∏ –∫–æ–º–∞–Ω–¥–∞ `host maskbrowser.ru` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞—à IP:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
cd /opt/mask-browser/infra/scripts
chmod +x setup-domain.sh
sudo ./setup-domain.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç certbot
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–æ–≤

## –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤–∞—à–∏ —Å–∞–π—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:
- üåê **https://maskbrowser.ru** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç
- üîê **https://admin.maskbrowser.ru** - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect maskbrowser.ru:443 -servername maskbrowser.ru

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
echo | openssl s_client -connect maskbrowser.ru:443 -servername maskbrowser.ru 2>/dev/null | openssl x509 -noout -dates

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
sudo systemctl reload nginx

# –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é
sudo certbot renew

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/maskbrowser.ru_access.log
sudo tail -f /var/log/nginx/admin.maskbrowser.ru_access.log
```
